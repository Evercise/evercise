function redirectTo(t){window.location.href=t.url}function updateCart(t){var o=$(".nav-cart");o.dropdown("toggle"),$(".nav-cart").find("#cart-sub-total").html(5e3),o.find("#cart-sub-total").remove(),o.find("#cart-total").html(t.total),o.find("#cart-discount").html(t.discount),console.log(t.cartRows)}
if("undefined"!=typeof angular){var app=angular.module("DiscoverApp",["google-maps".ns(),"infinite-scroll","ngSanitize"]);app.config(["GoogleMapApiProvider".ns(),function(n){n.configure({v:"3.16",libraries:"weather,geometry,visualization"})}]),app.filter("truncate",function(){return function(n,e,r){return isNaN(e)&&(e=10),void 0===r&&(r="..."),n.length<=e||n.length-r.length<=e?n:String(n).substring(0,e-r.length)+r}}),app.filter("repeat",function(){return function(n,e){e=parseInt(e);for(var r=0;e>r;r++)n.push(r);return n}})}
$.fn.exists=function(t){var s=[].slice.call(arguments,1);return this.length&&t.call(this,s),this};
$.ajaxSetup({headers:{"X-CSRF-Token":TOKEN}}),$(function(){$(".navbar").exists(function(){new Navigation(this,$(".hero-nav-change"),$(".sticky-fixed-nav"))}),$(".masonry").exists(function(){new Masonry(this)}),$("#user-nav-bar").exists(function(){new Profile(this)}),$(".toggle-switch").exists(function(){new ToggleSwitch(this)}),$(".map-wrapper").exists(function(){}),$(".mb-scroll").exists(function(){$(this).mCustomScrollbar({scrollSpeed:10,autoHideScrollbar:!0})}),$(".holder").exists(function(){new ImagePlaceholder}),$("#register-form").exists(function(){self=this,new Validation(this)}),$(".class-preview").exists(function(){new PreviewClassBox(this)}),$(".hide-by-class").exists(function(){var s=0;$(".hide-by-class").each(function(){var e=this;$("."+$(this).attr("href").substr(1)).exists(function(){0==s&&($(e).addClass("active"),$(this).removeClass("hide")),$(e).removeClass("disabled"),s++})}),this.click(function(){$(".hide-by-class").removeClass("active"),$(this).addClass("active"),$(".hide-by-class-element").addClass("hide"),$("."+$(this).attr("href").substr(1)).removeClass("hide")})}),$("#login-form").exists(function(){login=this,$(document).on("submit",login,function(s){s.preventDefault(),new AjaxRequest(login,redirectTo)})}),$(".add-to-class").exists(function(){$(this).submit(function(s){s.preventDefault(),new AjaxRequest($(this),updateCart)})})});
var Validation=function(s){this.form=s,this.validIcon="glyphicon glyphicon-ok",this.invalidIcon="glyphicon glyphicon-remove",this.validatingIcon="glyphicon glyphicon-refresh",this.displayName={message:"Your username is not valid",validators:{notEmpty:{message:"Your display name is required"},stringLength:{min:5,max:20,message:"Your display name must be more than 5 and less than 20 characters long"},regexp:{regexp:/^[a-zA-Z0-9_]+$/,message:"Your display name can only consist of alphabetical, number and underscore"}}},this.email={validators:{notEmpty:{message:"Your email is required and cannot be empty"},emailAddress:{message:"Your email is not a valid email address"}}},this.first_name={validators:{notEmpty:{message:"Your first name is required and cannot be empty"},stringLength:{min:2,max:15,message:"Your first name must be more than 2 and less than 15 characters long"}}},this.last_name={validators:{notEmpty:{message:"Your surname is required and cannot be empty"},stringLength:{min:2,max:15,message:"Your surname must be more than 2 and less than 15 characters long"}}},this.password={validators:{notEmpty:{message:"Your password is required and cannot be empty"},stringLength:{min:6,max:32,message:"Your Password must be more than 6 and less than 32 characters long"},identical:{field:"confirmed_password",message:"Your passwords do not match"}}},this.confirmed_password={validators:{notEmpty:{message:"Your password is required and cannot be empty"},stringLength:{min:6,max:32,message:"Your Password must be more than 6 and less than 32 characters long"},identical:{field:"password",message:"Your passwords do not match"}}},this.init()};Validation.prototype={constructor:Validation,init:function(){this.form.bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:this.validIcon,invalid:this.invalidIcon,validating:this.validatingIcon},fields:{display_name:this.displayName,email:this.email,first_name:this.first_name,last_name:this.last_name,password:this.password,confirmed_password:this.confirmed_password}}).on("success.form.bv",function(s){s.preventDefault(),new AjaxRequest($(s.target),redirectTo)})}};
"undefined"!=typeof angular&&app.controller("DiscoverController",["$scope","$q",function(e){function i(e){$(".class-snippet").addClass("fade-out"),$(".class-snippet").removeClass("active"),$(e).addClass("active"),$(".mb-scroll").mCustomScrollbar("scrollTo",e,{scrollInertia:500,timeout:10})}e.everciseGroups=laracasts.mapResults,e.view="mapview",e.sort="id",e.changeView=function(i){e.view=i},e.isPreviewOpen=!1,e.map={center:{latitude:50,longitude:-1},pann:{},options:{streetViewControl:!1,maxZoom:20,minZoom:3},zoom:12},e.results=e.everciseGroups.length,e.myMarkers=[],e.clusterOptions={gridSize:8,maxZoom:17,zoom:15},e.mask=!1,e.initialLoad=e.everciseGroups.length<200?e.everciseGroups.length:200,e.markers=[];var t=function(i){var t={id:i.id,name:i.name,image:"/profiles/"+i.user.directory+"/"+i.image,latitude:i.venue.lat,longitude:i.venue.lng,icon:"/assets/img/icon_default_small_pin.png",price:i.default_price,rating:i.ratings.length,description:i.description,stars:e.getStars(i.ratings),capacity:i.capacity,sessions:i.futuresessions,nextClassDate:new Date(i.futuresessions[0].date_time),nextClassDuration:i.futuresessions[0].duration,link:"/class/"+i.id,click:function(){e.clicked(this.model)}};return t};e.clusterEvents={click:function(i,t){angular.forEach(t,function(i){e.clicked(i)})}},e.returnPreview=function(){e.isPreviewOpen=!1},e.lastActiveMarker="",e.clicked=function(t){e.isPreviewOpen=!0,e.preview.id="preview-"+t.id,e.preview.image="url('"+t.image+"')",e.preview.description=t.description,e.preview.nextClassDate=new Date(t.sessions[0].date_time),e.preview.nextClassDuration=t.sessions[0].duration,e.preview.capacity=t.capacity,e.preview.link=t.link,e.lastActiveMarker.icon="/assets/img/icon_default_small_pin.png",e.lastActiveMarker=t,t.icon="/assets/img/icon_default_large_pin.png",e.map.pan={latitude:t.latitude,longitude:t.longitude},e.map.center={latitude:t.latitude,longitude:t.longitude},e.map.zoom=15,e.mask=!0,i("#"+t.id)},e.getStars=function(e){var i=0;if(e.length>0){for(var t=0;t<e.length;t++)i+=e[t].stars;result=Math.round(i/e.length)}else result=0;return result},e.preview={id:1,image:"",description:"",nextClassDate:"",nextClassDuration:"",capacity:"",link:""},e.$watch(function(){return e.map.bounds},function(){for(var i=0;i<e.initialLoad;i++)e.myMarkers.push(t(e.everciseGroups[i]));e.markers=e.myMarkers},!0)}]);
var Navigation=function(s,t,i){this.nav=s,this.hero=t,this.sticky=i,this.stickyTop=0,this.height=s.height(),this.heroClass="nav-hero",this.scroll=0,this.init(),this.checkScrollPosition()};Navigation.prototype={constructor:Navigation,init:function(){this.hero.length>0&&this.addHeroClass(),this.sticky.length>0&&(this.stickyTop=this.sticky.offset().top,this.stick())},addHeroClass:function(){this.nav.addClass(this.heroClass)},removeHeroClass:function(){this.nav.removeClass(this.heroClass)},addStickyClass:function(){this.sticky.addClass("navbar-fixed-top"),this.sticky.css({top:this.height}),$(".sticky-wrapper").css({"margin-top":this.sticky.outerHeight(!0)})},removeStickyClass:function(){this.sticky.removeClass("navbar-fixed-top"),this.sticky.css({top:0}),$(".sticky-wrapper").css({"margin-top":0})},checkScrollPosition:function(){var s=this;$(window).scroll(function(){s.scroll=$(window).scrollTop(),s.stick(),s.scroll+s.height>=s.hero.outerHeight()?s.removeHeroClass():s.addHeroClass()})},stick:function(){var s=this;s.scroll>s.stickyTop-this.sticky.outerHeight(!0)?s.addStickyClass():s.removeStickyClass()}};
var Profile=function(t){this.nav=t,this.top=0,this.speed=400,this.init()};Profile.prototype={constructor:Profile,init:function(){this.top=Math.floor(this.nav.offset().top-this.nav.outerHeight(!0));var t=this;$(document).on("click",".nav-pills li a",function(){destination=$(this).attr("href"),$(".nav-pills li").removeClass("active"),$(this).parent().addClass("active"),$(".profile-panels").addClass("hidden"),$(destination).removeClass("hidden"),new Masonry($(".masonry")),t.scroll()})},scroll:function(){}};
var Masonry=function(n){this.masonry=n,this.init()};Masonry.prototype={constructor:Masonry,init:function(){var n=this.masonry;n.masonry({itemSelector:".masonry-item",isInitLayout:!0,transitionDuration:0}),n.masonry}};
var ToggleSwitch=function(t){this.button=t,this.html="",this.toggledHtml="",this.init()};ToggleSwitch.prototype={constructor:Masonry,init:function(){var t=this;this.button.on("click",function(i){i.preventDefault(),t.changeState(),$($(this).attr("data-target")).collapse("toggle")})},changeState:function(){this.html=this.button.html(),this.toggledHtml=this.button.data("toggled"),this.button.html(this.toggledHtml),this.button.data("toggled",this.html)}};
function Map(){this.lat=51.53,this.lng=-.12,this.zoom=12,this.init()}Map.prototype={constructor:Map,init:function(){var e=document.createElement("script");e.src="http://www.google.com/jsapi?key=AIzaSyAha5JzFciZvU_rWu_2d2UVl7o4Z8LWdcg&callback=map.load",e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)},load:function(){self=this,google.load("maps","3",{other_params:"sensor=false",callback:function(){var e=new google.maps.Map(document.getElementById("map_canvas"),{center:new google.maps.LatLng(self.lat,self.lng),zoom:self.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP});google.maps.event.trigger(e,"resize")}})}};
var AjaxRequest=function(t,a){this.form=t,this.actionUrl=t.attr("action"),this.method=t.attr("method"),this.data=t.serialize(),this.dataType="json",this.validationScrollSpeed=200,this.validationoffset=85,this.validationscroll=!1,this.callbackname=a,this.disableButton(),this.init()};AjaxRequest.prototype={constuctor:AjaxRequest,init:function(){self=this,$.ajax({url:self.actionUrl,type:self.method,data:self.data,dataType:self.dataType}).done(function(t){self.callbackSelctor(t)})},disableButton:function(){this.form.find('input[type="submit"]').prop("disabled",!0)},renableButton:function(){this.form.find('input[type="submit"]').prop("disabled",!1)},callbackSelctor:function(t){"error"==t.callback?self.failedValidation(t):self.callbackname(t)},failedValidation:function(t){self=this;var a=t.errors;"login-form"==self.form.attr("id")?self.form.find("input[name = 'password']").after('<div class="mt10 alert alert-danger alert-dismissible" role="alert">'+a+'<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></div>'):$.each(a,function(t,a){0==self.validationscroll&&(self.form.find("#"+t).focus(),$("html, body").animate({scrollTop:self.form.find("#"+t).offset().top-self.validationoffset},self.validationScrollSpeed),self.validationscroll=!0),self.form.find("#"+t).parent().addClass("has-error"),self.form.find("#"+t).parent().find(".glyphicon-ok").remove(),self.form.find("#"+t).after('<small class="help-block" data-bv-validator="notEmpty" data-bv-for="'+t+'" data-bv-result="INVALID">'+a+"</small>"),self.form.find("#"+t).after('<i class="form-control-feedback glyphicon glyphicon-remove" data-bv-icon-for="'+t+'" style="display: block;"></i>')}),self.renableButton()}};
var ImagePlaceholder=function(){this.colour="#ebedee",this.size=0,this.themes()};ImagePlaceholder.prototype={constructor:ImagePlaceholder,themes:function(){self=this,Holder.addTheme("upload",{background:self.colour,foreground:self.colour,size:self.size})}};
var PreviewClassBox=function(s){this.box=s,this.boxClass=s.attr("class"),this.id=s.attr("id")};